<div class="post">

  <article>
    {{ content }}
  </article>

  <style>
    body {
      background-color: #d3d3d3; /* Light grey background */
    }
    .midi-player, .midi-visualizer {
      background-color: #4d4;
      display: block;
      width: auto;
      height: auto;
    }
  </style>

  <!-- MIDI Player Integration -->
  <script src="https://cdn.jsdelivr.net/npm/tone@14.7.58"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/midi-player@1.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/@magenta/music@1.23.1/es6/core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html-midi-player@1.5.0"></script>

  <div class="VoiceGroup-section">
    <h3 style="font-weight: bold;">Voice Group Selector</h3>
    <hr>

    <!-- Voice Group Selector -->
    <select id="voiceGroupSelect" onchange="updateMidiPlayers()">
      <option selected disabled>Select Voice Group</option> <!-- Default 'prompt' option -->
      <option value="0">Kicks</option>
      <option value="1">Snares</option>
      <option value="2">Hats</option>
      <option value="3">Toms</option>
      <option value="4">Cymbals</option>
    </select>

    <!-- Sample Selector -->
    <select id="sampleSelect" onchange="updateMidiPlayers()">
      <option selected disabled>Select Sample</option> <!-- Default 'prompt' option -->
      {% for j in (0..99) %}
      <option value="{{ j }}">Sample {{ j }}</option>
      {% endfor %}
    </select>

    <!-- Model Selector -->
    <select id="modelSelect" onchange="updateMidiPlayers()">
      <option selected disabled>Select Model</option> <!-- Default 'prompt' option -->
      <option value="0">Mute</option>
      <option value="1">MuteGenre1</option>
      <option value="2">MuteGenre2</option>
    </select>

    <!-- Beta Selector -->
    <select id="betaSelect" onchange="updateMidiPlayers()">
      <option selected disabled>Select Beta</option> <!-- Default 'prompt' option -->
      <option value="0">0.2</option>
      <option value="1">0.5</option>
      <option value="2">1.0</option>
    </select>

    <div class="players">
      <br>

      <h7>Not Muted</h7>
      <br>
      <midi-player id="midiPlayerNotMuted" sound-font visualizer="#midiVisualizerNotMuted"></midi-player>
      <midi-visualizer type="piano-roll" id="midiVisualizerNotMuted"></midi-visualizer>
      <br>

      <h7>Muted</h7>
      <br>
      <midi-player id="midiPlayerMuted" sound-font visualizer="#midiVisualizerMuted"></midi-player>
      <midi-visualizer type="piano-roll" id="midiVisualizerMuted"></midi-visualizer>
    </div>
  </div>

  <script>
    function updateMidiPlayers() {
      var voiceGroupSelect = document.getElementById('voiceGroupSelect').value;
      var sampleSelect = document.getElementById('sampleSelect').value;
      var modelSelect = document.getElementById('modelSelect').value;
      var betaSelect = document.getElementById('betaSelect').value;

      // Assuming there are URLs or data that correspond to these selections
      var voices = ["Kicks", "Snares", "Hats", "Toms", "Cymbals"];
      var models = ["Mute", "MuteGenre1", "MuteGenre2"];
      var betas = ["0.2", "0.5", "1.0"];

      // Ensure valid selection before updating players
      if (!voiceGroupSelect || !sampleSelect || !modelSelect || !betaSelect) return;

      // Update the MIDI Player source for not muted
      var midiUrlNotMuted = "{{ site.baseurl }}/assets/muted_generations/" + models[modelSelect] + "/" + betas[betaSelect] + "/" + voices[voiceGroupSelect] + "/not_muted/" + sampleSelect + ".mid";
      var midiPlayerNotMuted = document.getElementById('midiPlayerNotMuted');
      midiPlayerNotMuted.src = midiUrlNotMuted;
      var midiVisualizerNotMuted = document.getElementById('midiVisualizerNotMuted');
      midiVisualizerNotMuted.setAttribute('src', midiPlayerNotMuted.src);

      // Update the MIDI Player source for muted
      var midiUrlMuted = "{{ site.baseurl }}/assets/muted_generations/" + models[modelSelect] + "/" + betas[betaSelect] + "/" + voices[voiceGroupSelect] + "/muted/" + sampleSelect + ".mid";
      var midiPlayerMuted = document.getElementById('midiPlayerMuted');
      midiPlayerMuted.src = midiUrlMuted;
      var midiVisualizerMuted = document.getElementById('midiVisualizerMuted');
      midiVisualizerMuted.setAttribute('src', midiPlayerMuted.src);
    }
  </script>

</div>
